
function showLayer(n,t){n!=undefined&&(LAYER_FADE_DURATION=n);t==undefined&&shadowfilter.fadeIn(LAYER_FADE_DURATION);$(layer).fadeIn(LAYER_FADE_DURATION);$(layer).css("top",$(window).scrollTop()+"px");LAYER_FADE_DURATION=200}function hideLayer(n){n!=undefined&&(LAYER_FADE_DURATION=n);shadowfilter.fadeOut(LAYER_FADE_DURATION);layer.fadeOut(LAYER_FADE_DURATION);LAYER_FADE_DURATION=200}function ThanksLayer(){showLayerBriefly("/"+$("body").attr("data-lang")+"/layers/thanks",5e3)}function ErrorsLayer(){showLayerBriefly("/"+$("body").attr("data-lang")+"/layers/errors",1e4)}function centerLayer(){$(layer).css("top",($(window).height()-$(layer).height())/2+$(window).scrollTop()+"px")}function showLayerBriefly(n,t){$.ajax({url:n,type:"GET",success:function(n){$("#placeForLayer").html(n);showLayer();setTimeout(function(){hideLayer()},t)}})}function RegistrationLayer(){$("#layer-registration").modal("show")}function PaymentLayer(n){cloneElement("initialFormRequestPayment","paymentRequestForm",!0);$("#layer-add-balance").modal("show");typeof n!="undefined"&&n()}function CallBackLayer(n,t){cloneElement(n,"callBackForm",!0);$("#layer-feedback").modal("show");typeof t!="undefined"&&t()}function _onSuccess(){showLayer()}function showContentLayer(n,t){$("#placeForLayer").html(n);showLayer();t&&setTimeout(hideLayer,t)}function cloneElement(n,t,i){var f=document.getElementById(n).firstElementChild,r=document.getElementById(t),e=f.cloneNode(!0),u;r.innerHTML="";r.appendChild(e);i&&($(".pnone_mask").phonemask(7),u=$(r).find("form"),$.validator.unobtrusive.parse(u))}function loadCaptcha(){var u=function(n,t){for(var r=[],i=0;i<n.childNodes.length;i++)n.childNodes[i].className.match(new RegExp("(?:^|s)"+t+"(?!S)"))&&r.push(n.childNodes[i]);return r},f=document.getElementById("captcha"),r,i,n;if(f){var e=u(f,"color_captcha")[0],t=u(e,"captcha_item"),o=document.getElementById("CaptchaId");function s(n,t){var r=this.dom,i=t?/undefined|unknown/.test(typeof(i=r[t+":"+n]))?undefined:i:r[n];return i||""}for(r=function(n){var u=n,f=u.getAttribute("attr"),i,r;for(o.value=f,i=0;i<t.length;i++)r=t[i],r.className=r.className.replace(/(?:^|\s)captcha_selected(?!\S)/g,"");u.className+=" captcha_selected"},i=0;i<t.length;i++)n=t[i],n.addEventListener?n.addEventListener("click",function(){r(this)}):n.attachEvent("onclick",function(n){return function(){r(n)}}(n))}}var LAYER_FADE_DURATION=200,layer=$(".layer"),shadowfilter=$(".shadowfiller"),placeForLayer=$("#placeForLayer");$(document).ready(function(){$(".layer").on("click",".close",function(n){n.preventDefault();hideLayer()});$("body").on("click",function(n){$(n.target).closest(".layer-in").length===0&&hideLayer()})});loadCaptcha();$(function(){$(".js-open-callback-layer").on("click",function(n){n.preventDefault();CallBackLayer($(n.currentTarget).attr("data-form-id"))});$(document).on("click","#sendRequest",function(){var n=$("#callBackForm").find("form");n.valid()&&n.submit()})})